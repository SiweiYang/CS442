<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head><meta http-equiv="content-type" content="text/html; charset=utf-8"/><title>3&nbsp;Q3 (posted Jan 25, due Feb 5)</title><link rel="stylesheet" type="text/css" href="scribble.css" title="default"/><link rel="stylesheet" type="text/css" href="racket.css" title="default"/><link rel="stylesheet" type="text/css" href="scribble-style.css" title="default"/><script type="text/javascript" src="scribble-common.js"></script><!--[if IE 6]><style type="text/css">.SIEHidden { overflow: hidden; }</style><![endif]--></head><body id="scribble-racket-lang-org"><div class="tocset"><div class="tocview"><div class="tocviewlist tocviewlisttopspace"><div class="tocviewtitle"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_0&quot;);">&#9660;</a></td><td></td><td><a href="index.html" class="tocviewlink" data-pltdoc="x">CS 442 Assignment Questions</a></td></tr></table></div><div class="tocviewsublistonly" style="display: block;" id="tocview_0"><table cellspacing="0" cellpadding="0"><tr><td align="right">1&nbsp;</td><td><a href="Q1__posted_Jan_14__due_Jan_21_.html" class="tocviewlink" data-pltdoc="x">Q1 (posted Jan 14, due Jan 21)</a></td></tr><tr><td align="right">2&nbsp;</td><td><a href="Q2__posted_Jan_14__due_Jan_31_.html" class="tocviewlink" data-pltdoc="x">Q2 (posted Jan 14, due Jan 31)</a></td></tr><tr><td align="right">3&nbsp;</td><td><a href="" class="tocviewselflink" data-pltdoc="x">Q3 (posted Jan 25, due Feb 5)</a></td></tr><tr><td align="right">4&nbsp;</td><td><a href="Q4__posted_Feb_3__due_Feb_10_.html" class="tocviewlink" data-pltdoc="x">Q4 (posted Feb 3, due Feb 10)</a></td></tr><tr><td align="right">5&nbsp;</td><td><a href="Q5__posted_Feb_3__due_Feb_12_.html" class="tocviewlink" data-pltdoc="x">Q5 (posted Feb 3, due Feb 12)</a></td></tr><tr><td align="right">6&nbsp;</td><td><a href="Q6__posted_Feb_3__due_Feb_14_.html" class="tocviewlink" data-pltdoc="x">Q6 (posted Feb 3, due Feb 14)</a></td></tr><tr><td align="right">7&nbsp;</td><td><a href="Q7__posted_Feb_10__due_Feb_24_.html" class="tocviewlink" data-pltdoc="x">Q7 (posted Feb 10, due Feb 24)</a></td></tr><tr><td align="right">8&nbsp;</td><td><a href="Q8__posted_Feb_10__due_Feb_24_.html" class="tocviewlink" data-pltdoc="x">Q8 (posted Feb 10, due Feb 24)</a></td></tr><tr><td align="right">9&nbsp;</td><td><a href="Q9__posted_Feb_10__due_Feb_24_.html" class="tocviewlink" data-pltdoc="x">Q9 (posted Feb 10, due Feb 24)</a></td></tr><tr><td align="right">10&nbsp;</td><td><a href="Q10__posted_Feb_10__due_Feb_24_.html" class="tocviewlink" data-pltdoc="x">Q10 (posted Feb 10, due Feb 24)</a></td></tr><tr><td align="right">11&nbsp;</td><td><a href="Q11__posted_Mar_1__due_Mar_7_.html" class="tocviewlink" data-pltdoc="x">Q11 (posted Mar 1, due Mar 7)</a></td></tr><tr><td align="right">12&nbsp;</td><td><a href="Q12__posted_Mar_10__due_Mar_17_.html" class="tocviewlink" data-pltdoc="x">Q12 (posted Mar 10, due Mar 17)</a></td></tr><tr><td align="right">13&nbsp;</td><td><a href="Q13__posted_Mar_10__due_Mar_21_.html" class="tocviewlink" data-pltdoc="x">Q13 (posted Mar 10, due Mar 21)</a></td></tr><tr><td align="right">14&nbsp;</td><td><a href="Q14__posted_Mar_14__due_Mar_24_.html" class="tocviewlink" data-pltdoc="x">Q14 (posted Mar 14, due Mar 24)</a></td></tr><tr><td align="right">15&nbsp;</td><td><a href="Q15__posted_Mar_14__due_Mar_26_.html" class="tocviewlink" data-pltdoc="x">Q15 (posted Mar 14, due Mar 26)</a></td></tr><tr><td align="right">16&nbsp;</td><td><a href="Q16__posted_Mar_14__due_March_28_.html" class="tocviewlink" data-pltdoc="x">Q16 (posted Mar 14, due March 28)</a></td></tr><tr><td align="right">17&nbsp;</td><td><a href="Q17__posted_Mar_17__due_Apr_1_.html" class="tocviewlink" data-pltdoc="x">Q17 (posted Mar 17, due Apr 1)</a></td></tr></table></div></div></div></div><div class="maincolumn"><div class="main"><div class="navsettop"><span class="navleft">&nbsp;&nbsp;</span><span class="navright">&nbsp;&nbsp;<a href="Q2__posted_Jan_14__due_Jan_31_.html" title="backward to &quot;2 Q2 (posted Jan 14, due Jan 31)&quot;" data-pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="index.html" title="up to &quot;CS 442 Assignment Questions&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<a href="Q4__posted_Feb_3__due_Feb_10_.html" title="forward to &quot;4 Q4 (posted Feb 3, due Feb 10)&quot;" data-pltdoc="x">next &rarr;</a></span>&nbsp;</div><h3>3<tt>&nbsp;</tt><a name="(part._.Q3__posted_.Jan_25__due_.Feb_5_)"></a>Q3 (posted Jan 25, due Feb 5)</h3><script type="text/javascript" src="https://c328740.ssl.cf1.rackcdn.com/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><p>[Edit Feb 1: corrected <span class="RktSym">with</span> syntax]</p><p><span style="font-weight: bold">Language:</span> Racket.</p><p><span style="font-weight: bold">Weight:</span> 2.0</p><p>In this question, you will be implementing an interpreter
for an Racket-like language extending the lambda calculus, using
a standard technique.</p><p>You may have noticed, in implementing Q2, that substitution is
a potential source of inefficiency, as one has to descend through
the entire body of the expression. One strategy we will explore here
is to defer substitution by means of an environment, which is a map
from variables (or names) to values
(for the lambda calculus, values are abstractions). This allows
the creation of an efficient recursive evaluator.</p><p>Although an abstraction is a value for the lambda calculus, when we defer substitution,
the recursive evaluator cannot just be the identity function on abstractions.
The reason is that with immediate substitutions, some variables would have been
substituted for, but they remain free in the body of the abstraction under deferred
substitution. Thus we must save the current environment <span class="relax">\(e\)</span>,
which contains bindings for those free variables, along with the abstraction <span class="relax">\(t\)</span>.
This pair <span class="relax">\(\langle t,e \rangle\)</span> is called a <span style="font-style: italic">closure</span>, and an
environment will be a map from names to closures.</p><p>The starter code for this question contains a bare-bones implementation of
this strategy for the lambda calculus. An environment is an association list
(list of lists of length two), and we extend an environment by simply cons-ing
a new pair onto the front. Since the built-in lookup function (<span class="RktSym"><a href="http://docs.racket-lang.org/reference/pairs.html#%28def._%28%28lib._racket%2Fprivate%2Flist..rkt%29._assoc%29%29" class="RktValLink" data-pltdoc="x">assoc</a></span>)
takes the first match, this avoids the need to remove an old value from an environment,
with the cost of some possible inefficiency.</p><p>Here is the grammar for the language implemented by the starter code.</p><p><table cellspacing="0"><tr><td align="right" valign="baseline"><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">exp</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">=</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">(</span><span class="RktSym">fun</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktVar">var</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVar">exp</span><span class="RktPn">)</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">(</span><span class="RktVar">exp</span><span class="hspace">&nbsp;</span><span class="RktVar">exp</span><span class="RktPn">)</span></td></tr></table></p><p>Here is the grammar for the extensions you will implement.</p><p><table cellspacing="0"><tr><td align="right" valign="baseline"><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">exp</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">=</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">(</span><span class="RktSym">fun</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktVar">var</span><span class="hspace">&nbsp;</span><span class="RktVar">var</span><span class="hspace">&nbsp;</span><span class="RktSym">...</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVar">exp</span><span class="RktPn">)</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">(</span><span class="RktSym">with</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktVar">var</span><span class="hspace">&nbsp;</span><span class="RktVar">exp</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">...</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVar">exp</span><span class="RktPn">)</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/if.html#%28form._%28%28quote._~23~25kernel%29._if%29%29" class="RktStxLink" data-pltdoc="x">if</a></span><span class="hspace">&nbsp;</span><span class="RktVar">exp</span><span class="hspace">&nbsp;</span><span class="RktVar">exp</span><span class="hspace">&nbsp;</span><span class="RktVar">exp</span><span class="RktPn">)</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">(</span><span class="RktSym">rec</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">[</span><span class="RktVar">var</span><span class="hspace">&nbsp;</span><span class="RktVar">exp</span><span class="RktPn">]</span><span class="hspace">&nbsp;</span><span class="RktSym">...</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVar">exp</span><span class="RktPn">)</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">(</span><span class="RktVar">binop</span><span class="hspace">&nbsp;</span><span class="RktVar">exp</span><span class="hspace">&nbsp;</span><span class="RktVar">exp</span><span class="RktPn">)</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">(</span><span class="RktVar">unop</span><span class="hspace">&nbsp;</span><span class="RktVar">exp</span><span class="RktPn">)</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">(</span><span class="RktVar">exp</span><span class="hspace">&nbsp;</span><span class="RktVar">exp</span><span class="hspace">&nbsp;</span><span class="RktSym">...</span><span class="RktPn">)</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktVar">const</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td></tr><tr><td align="right" valign="baseline"><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">binop</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">=</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktSym"><a href="http://docs.racket-lang.org/reference/generic-numbers.html#%28def._%28%28quote._~23~25kernel%29._%2B%29%29" class="RktValLink" data-pltdoc="x">+</a></span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktSym"><a href="http://docs.racket-lang.org/reference/generic-numbers.html#%28def._%28%28quote._~23~25kernel%29._-%29%29" class="RktValLink" data-pltdoc="x"><span class="nobreak">-</span></a></span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktSym"><a href="http://docs.racket-lang.org/reference/generic-numbers.html#%28def._%28%28quote._~23~25kernel%29._%2A%29%29" class="RktValLink" data-pltdoc="x">*</a></span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktSym"><a href="http://docs.racket-lang.org/reference/generic-numbers.html#%28def._%28%28quote._~23~25kernel%29._%2F%29%29" class="RktValLink" data-pltdoc="x">/</a></span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktSym">kons</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td></tr><tr><td align="right" valign="baseline"><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">unop</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">=</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktSym">mt?</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktSym"><a href="http://docs.racket-lang.org/reference/number-types.html#%28def._%28%28quote._~23~25kernel%29._zero~3f%29%29" class="RktValLink" data-pltdoc="x">zero?</a></span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktSym">fst</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktSym">rst</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td></tr><tr><td align="right" valign="baseline"><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">const</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">=</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktVar">number</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktSym">mt</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktSym">fls</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktSym">tru</span></td></tr></table></p><p>This syntax lets a programmer describe
functions with more than one parameter (parameters
must be distinct, and applications must use the right number
of arguments), numbers and arithmetic expressions, and lists.
The semantics for the new constructs are the same as the
corresponding Racket features; that is, you will use Racket
numbers, conditionals, and lists to implement these features
in your interpreter. (The alternative is to use the lambda-calculus
simulations we discussed in lecture, but these are much more inefficient.)
The <span class="stt">with</span> form is like Racket&rsquo;s <span class="RktSym"><a href="http://docs.racket-lang.org/reference/let.html#%28form._%28%28lib._racket%2Fprivate%2Fletstx-scheme..rkt%29._let%29%29" class="RktStxLink" data-pltdoc="x">let</a></span>,
and it can be desugared to an immediate application of a function right
in the parser (simulating Racket&rsquo;s macro implementation).</p><p>The one exception is the new <span class="RktSym">rec</span> construct, whose semantics
is the same as <span class="RktSym"><a href="http://docs.racket-lang.org/reference/let.html#%28form._%28%28lib._racket%2Fprivate%2Fletstx-scheme..rkt%29._letrec%29%29" class="RktStxLink" data-pltdoc="x">letrec</a></span>, but which cannot be conveniently
implemented using <span class="RktSym"><a href="http://docs.racket-lang.org/reference/let.html#%28form._%28%28lib._racket%2Fprivate%2Fletstx-scheme..rkt%29._letrec%29%29" class="RktStxLink" data-pltdoc="x">letrec</a></span> with our representation of environments.
If the result of evaluating <span class="stt">E</span> in <span class="stt">(rec (x E) B)</span> is a closure, the
environment of that closure must contain a correct binding for <span class="stt">x</span>, and
so the data structure is circular. You are allowed one use of mutation to
implement this, by making the closure structure mutable.</p><p>Here are the new structure definitions.</p><blockquote class="SCodeFlow"><table cellspacing="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/define-struct.html#%28form._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._struct%29%29" class="RktStxLink" data-pltdoc="x">struct</a></span><span class="hspace">&nbsp;</span><span class="RktSym">fun</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">params</span><span class="hspace">&nbsp;</span><span class="RktSym">body</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">#:transparent</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/define-struct.html#%28form._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._struct%29%29" class="RktStxLink" data-pltdoc="x">struct</a></span><span class="hspace">&nbsp;</span><span class="RktSym">app</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">fn</span><span class="hspace">&nbsp;</span><span class="RktSym">args</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">#:transparent</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/define-struct.html#%28form._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._struct%29%29" class="RktStxLink" data-pltdoc="x">struct</a></span><span class="hspace">&nbsp;</span><span class="RktSym">rec</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">vars</span><span class="hspace">&nbsp;</span><span class="RktSym">exps</span><span class="hspace">&nbsp;</span><span class="RktSym">bdy</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">#:transparent</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/define-struct.html#%28form._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._struct%29%29" class="RktStxLink" data-pltdoc="x">struct</a></span><span class="hspace">&nbsp;</span><span class="RktSym">iff</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">test</span><span class="hspace">&nbsp;</span><span class="RktSym">texp</span><span class="hspace">&nbsp;</span><span class="RktSym">fexp</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">#:transparent</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/define-struct.html#%28form._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._struct%29%29" class="RktStxLink" data-pltdoc="x">struct</a></span><span class="hspace">&nbsp;</span><span class="RktSym">bin-op</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">op</span><span class="hspace">&nbsp;</span><span class="RktSym">arg1</span><span class="hspace">&nbsp;</span><span class="RktSym">arg2</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">#:transparent</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/define-struct.html#%28form._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._struct%29%29" class="RktStxLink" data-pltdoc="x">struct</a></span><span class="hspace">&nbsp;</span><span class="RktSym">un-op</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">op</span><span class="hspace">&nbsp;</span><span class="RktSym">arg</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">#:transparent</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/define-struct.html#%28form._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._define-struct%29%29" class="RktStxLink" data-pltdoc="x">define-struct</a></span><span class="hspace">&nbsp;</span><span class="RktSym">closure</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">ast</span><span class="hspace">&nbsp;</span><span class="RktSym">env</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">#:transparent</span><span class="hspace">&nbsp;</span><span class="RktPn">#:mutable</span><span class="RktPn">)</span></td></tr></table></blockquote><p>Test expressions will be of the form <span class="RktPn">(</span><span class="RktSym">parse</span><span class="stt"> </span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/generic-numbers.html#%28def._%28%28quote._~23~25kernel%29._exp%29%29" class="RktValLink" data-pltdoc="x">exp</a></span><span class="RktPn">)</span>
and <br/> <span class="RktPn">(</span><span class="RktSym">interp</span><span class="stt"> </span><span class="RktPn">(</span><span class="RktSym">parse</span><span class="stt"> </span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/generic-numbers.html#%28def._%28%28quote._~23~25kernel%29._exp%29%29" class="RktValLink" data-pltdoc="x">exp</a></span><span class="RktPn">)</span><span class="stt"> </span><span class="RktSym"><a href="http://docs.racket-lang.org/reference/pairs.html#%28def._%28%28lib._racket%2Flist..rkt%29._empty%29%29" class="RktValLink" data-pltdoc="x">empty</a></span><span class="RktPn">)</span>. The test code
creates a new <span class="RktSym">run</span> function, so please do not include a function
of that name in your submitted code.</p><p>Your code will be tested only on syntactically correct programs,
and many semantic errors will be correctly reported by the underlying
Racket implementation,
but there are some errors you should handle yourself using the
Racket <span class="RktSym"><a href="http://docs.racket-lang.org/reference/exns.html#%28def._%28%28quote._~23~25kernel%29._error%29%29" class="RktValLink" data-pltdoc="x">error</a></span> function. If you detect duplicate parameters,
raise an error containing the word "duplicate". If a user-defined function is
applied to the wrong number of arguments, use the phrase "wrong number".
If a variable has no binding in scope, use the word "undefined".
If a rator evaluates to something other than a closure, use the phrase
"not a function".</p><p><span style="font-weight: bold">To submit:</span> <span class="stt">Q3.rkt</span>.</p><div class="navsetbottom"><span class="navleft">&nbsp;&nbsp;</span><span class="navright">&nbsp;&nbsp;<a href="Q2__posted_Jan_14__due_Jan_31_.html" title="backward to &quot;2 Q2 (posted Jan 14, due Jan 31)&quot;" data-pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="index.html" title="up to &quot;CS 442 Assignment Questions&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<a href="Q4__posted_Feb_3__due_Feb_10_.html" title="forward to &quot;4 Q4 (posted Feb 3, due Feb 10)&quot;" data-pltdoc="x">next &rarr;</a></span>&nbsp;</div></div></div><div id="contextindicator">&nbsp;</div></body></html>